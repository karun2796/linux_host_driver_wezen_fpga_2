PLATFORM?=WEZEN
FUNC?=WLAN_PWR
HACK_MONITOR_MODE?=0
KERNEL_VERSION?=5.15.0
INLINE_MODE?=Y
INLINE_MODE_RX?=N
BOUNCE_BUF?=N
RF?=B0
CMD_DEMO?=0
SECURE_DOMAIN?=Y
CMD_RX_BUFF?=N
ifeq ($(MODE), RADIO-TEST)
TWT_SUPPORT?=0
else
TWT_SUPPORT?=1
endif
LOW_POWER?=1
ifeq ($(PLATFORM),WEZEN)
MODE?=REG
SOFT_HPQM?=N
ifeq ($(SOFT_HPQM), Y)
ccflags-y += -DSOFT_HPQM
ccflags-y += -DCMD_RX_BUFF
endif
ccflags-y += -DRPU_VHT_SUPPORT
ccflags-y += -DRPU_HE_SUPPORT
ifeq ($(WLAN_SUPPORT), 1)
FW_LOAD?=ROM
endif


ifeq ($(INLINE_MODE_RX), Y)
ccflags-y += -DINLINE_RX
endif
ccflags-y += -DBUS_IF_PCIE

ccflags-y += -DCONFIG_NRF700X_MAX_TX_TOKENS=12 \
	     -DCONFIG_NRF700X_MAX_TX_AGGREGATION=10 \
	     -DCONFIG_NRF700X_RX_MAX_DATA_SIZE=1600 \
	     -DCONFIG_WIFI_MGMT_RAW_SCAN_RESULTS \
	     -DCONFIG_NRF700X_RX_NUM_BUFS=63 \
	     -DCONFIG_NRF700X_RX_MAX_DATA_SIZE=1600 \
	     -DCONFIG_NRF700X_ANT_GAIN_2G=0 \
	     -DCONFIG_NRF700X_ANT_GAIN_5G_BAND1=0 \
	     -DCONFIG_NRF700X_ANT_GAIN_5G_BAND2=0 \
	     -DCONFIG_NRF700X_ANT_GAIN_5G_BAND3=0 \
	     -DCONFIG_NRF700X_BAND_2G_LOWER_EDGE_BACKOFF=0 \
	     -DCONFIG_NRF700X_BAND_2G_UPPER_EDGE_BACKOFF=0 \
	     -DCONFIG_NRF700X_BAND_UNII_1_LOWER_EDGE_BACKOFF=0 \
	     -DCONFIG_NRF700X_BAND_UNII_1_UPPER_EDGE_BACKOFF=0 \
	     -DCONFIG_NRF700X_BAND_UNII_2A_LOWER_EDGE_BACKOFF=0 \
	     -DCONFIG_NRF700X_BAND_UNII_2A_UPPER_EDGE_BACKOFF=0 \
	     -DCONFIG_NRF700X_BAND_UNII_2C_LOWER_EDGE_BACKOFF=0 \
	     -DCONFIG_NRF700X_BAND_UNII_2C_UPPER_EDGE_BACKOFF=0 \
	     -DCONFIG_NRF700X_BAND_UNII_3_LOWER_EDGE_BACKOFF=0 \
	     -DCONFIG_NRF700X_BAND_UNII_3_UPPER_EDGE_BACKOFF=0 \
	     -DCONFIG_NRF700X_BAND_UNII_4_LOWER_EDGE_BACKOFF=0 \
	     -DCONFIG_NRF700X_BAND_UNII_4_UPPER_EDGE_BACKOFF=0 \
	     -DCONFIG_NRF700X_REG_DOMAIN=\"00\" \
	     -DCONFIG_NRF700X_TX_MAX_DATA_SIZE=1600 \
	     -DCONFIG_NRF700X_MAX_TX_PENDING_QLEN=1024 \
	     -DCONFIG_NRF700X_RPU_PS_IDLE_TIMEOUT_MS=10 \
	     -DCONFIG_NRF700X_BAND_2G_LOWER_EDGE_BACKOFF_DSSS=0 \
	     -DCONFIG_NRF700X_BAND_2G_LOWER_EDGE_BACKOFF_HT=0 \
	     -DCONFIG_NRF700X_BAND_2G_LOWER_EDGE_BACKOFF_HE=0 \
	     -DCONFIG_NRF700X_BAND_2G_UPPER_EDGE_BACKOFF_DSSS=0 \
	     -DCONFIG_NRF700X_BAND_2G_UPPER_EDGE_BACKOFF_HT=0 \
	     -DCONFIG_NRF700X_BAND_2G_UPPER_EDGE_BACKOFF_HE=0 \
	     -DCONFIG_NRF700X_BAND_UNII_1_LOWER_EDGE_BACKOFF_HT=0 \
	     -DCONFIG_NRF700X_BAND_UNII_1_LOWER_EDGE_BACKOFF_HE=0 \
	     -DCONFIG_NRF700X_BAND_UNII_1_UPPER_EDGE_BACKOFF_HT=0 \
	     -DCONFIG_NRF700X_BAND_UNII_1_UPPER_EDGE_BACKOFF_HE=0 \
	     -DCONFIG_NRF700X_BAND_UNII_2A_LOWER_EDGE_BACKOFF_HT=0 \
	     -DCONFIG_NRF700X_BAND_UNII_2A_LOWER_EDGE_BACKOFF_HE=0 \
	     -DCONFIG_NRF700X_BAND_UNII_2A_UPPER_EDGE_BACKOFF_HT=0 \
	     -DCONFIG_NRF700X_BAND_UNII_2A_UPPER_EDGE_BACKOFF_HE=0 \
	     -DCONFIG_NRF700X_BAND_UNII_2C_LOWER_EDGE_BACKOFF_HT=0 \
	     -DCONFIG_NRF700X_BAND_UNII_2C_LOWER_EDGE_BACKOFF_HE=0 \
	     -DCONFIG_NRF700X_BAND_UNII_2C_UPPER_EDGE_BACKOFF_HT=0 \
	     -DCONFIG_NRF700X_BAND_UNII_2C_UPPER_EDGE_BACKOFF_HE=0 \
	     -DCONFIG_NRF700X_BAND_UNII_3_LOWER_EDGE_BACKOFF_HT=0 \
	     -DCONFIG_NRF700X_BAND_UNII_3_LOWER_EDGE_BACKOFF_HE=0 \
	     -DCONFIG_NRF700X_BAND_UNII_3_UPPER_EDGE_BACKOFF_HT=0 \
	     -DCONFIG_NRF700X_BAND_UNII_3_UPPER_EDGE_BACKOFF_HE=0 \
	     -DCONFIG_NRF700X_BAND_UNII_4_LOWER_EDGE_BACKOFF_HT=0 \
	     -DCONFIG_NRF700X_BAND_UNII_4_LOWER_EDGE_BACKOFF_HE=0 \
	     -DCONFIG_NRF700X_BAND_UNII_4_UPPER_EDGE_BACKOFF_HT=0 \
	     -DCONFIG_NRF700X_BAND_UNII_4_UPPER_EDGE_BACKOFF_HE=0 \
	     -DCONFIG_NRF700X_UTIL

ifneq ($(MODE), RADIO-TEST)
ccflags-y += -DCONFIG_NRF700X_DATA_TX \
	     -DCONFIG_NRF700X_STA_MODE
endif	 

ifneq ($(FW_LOAD), NONE)
ccflags-y += -DRPU_HARD_RESET_SUPPORT
endif

ifeq ($(HOST_CFG80211), Y)
ccflags-y += -DHOST_CFG80211_SUPPORT
endif

ccflags-y += -DSOC_WEZEN
ifeq ($(SECURE_DOMAIN), Y)
ccflags-y += -DSOC_WEZEN_SECURE_DOMAIN
ccflags-y += -DCONFIG_WIFI_NRF700X_LOG_LEVEL=3
endif
ifeq ($(CMD_RX_BUFF), Y)
ccflags-y += -DCMD_RX_BUFF
endif
ccflags-y += -DRPU_SUPPORT_WAPI
#Enable this flag when C0 RF is being used.
#ccflags-y += -DRPU_RF_C0_SUPPORT

ifeq ($(WLAN_SUPPORT), 1)
ccflags-y += -DRPU_VHT_SUPPORT
ccflags-y += -DRPU_HE_SUPPORT
ccflags-y += -DRPU_BSS_DB_SUPPORT
#ccflags-y += -DDCR14_VALIDATE

#ccflags-y += -DCONFIG_NRF_WIFI_LOW_POWER
#ccflags-y += -DCONFIG_NRF_WIFI_LOW_POWER_DBG

ifeq ($(RF),C0)
ccflags-y += -DC0_CHIP
else
ifeq ($(RF),B0)
ccflags-y += -DB0_CHIP
endif
endif

ccflags-y += -DRPU_32_BIT_DMA_SUPPORT

OBJS += $(OSAL_DIR)/hw_if/hal/src/hpqm.o

ifeq ($(HACK_MONITOR_MODE), 1)
ccflags-y += -DHACK_MONITOR_MODE
OBJS += $(LINUX_SHIM_DIR)/src/monitor.o
endif
endif

ifeq ($(CONFIG), 72)
ccflags-y += -DRPU_CONFIG_72
endif

#Enable this flag, if you need logs support.
#ccflags-y +=    -DDRIVER_DEBUG
#ccflgas-y +=	 -g
endif
